# iraira_bo_goal

## 外観
<img src="https://github.com/Lchika/iraira_bo_goal/blob/master/doc/appearance.JPG" width="400px">

## ピンアサイン

|pin番号|接続先|
|---|---|
|D2  |ゴール前スイッチ入力|
|D3  |サーボ|
|D4  |D-subゴール通知ピン|
|D5  |D-subコース接触通知ピン|
|D7  |ゴール上LED|
|D8  |ゴール下LED|
|D9  |コース電圧入力|
|D17 |フォトインタラプタ入力|

## iraira_goal_main.ino
- メインプログラム
- loop()内の処理は以下の2つの処理を行うだけのシンプルなつくり
  - イベント発生確認
    - 以下の3つのイベントが発生しているか順に確認し、発生していたら該当するイベント番号を返す
      - ゴール前スイッチが押されているか
      - コースに接触しているか
      - フォトインタラプタ通過中か
  - イベント対応処理実行
    - 引数であるイベント番号に対応した処理を実行する
    - イベントが発生していない場合は何もしない
- StandardCplusplus.h という外部ライブラリを使用している
  - このライブラリを使うことでc++のSTLを使用できる

## led_manager.hpp | cpp
- ゴール上下にあるLED制御用クラス
- 2つのLEDをまとめて操作する
- インスタンス生成時にLEDのピン番号をリストで指定する
- 現在はLEDを2つ制御しているが任意個のLEDを制御可能
- 点滅処理はdelay()で時間制御をしているため、一定時間ほかの処理を行いないことに注意
- iraira_goal_main.inoと同様にStandardCplusplus.hをインクルードしている